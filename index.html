<!DOCTYPE html>
<html>

<head>
    <title> Expense Manager Application</title>
    <script src="js/angular.js" type="text/javascript"></script>
    <script src="js/app.js" type="text/javascript"></script>
    <script src="js/controller.js" type="text/javascript"></script>
    <script src="js/myfilter.js" type="text/javascript"></script>
    <script src="js/dataFactory.js" type="text/javascript"></script>
    <style>
    table,
    th,
    td {
        border: 1px solid grey;
        border-collapse: collapse;
        padding: 5px;
    }
    
    table tr:nth-child(odd) {
        background-color: #f2f2f2;
    }
    
    table tr:nth-child(even) {
        background-color: #ffffff;
    }
    
    .container {
        position: absolute;
    }
    
    .tbl {
        float: right;
        position: relative;
        top: -155px;
        margin-left: 300px;
    }
    </style>
</head>

<body ng-app="myapp">
    <h4> Expense Manager Web Application</h4>
    <div ng-controller="myController" class="container">
        Total Income = {{ totali }}
        <br/> Total Expense = {{ totale }}
        <br/> ----------------------------
        <br/> Total Balance = {{ (totali - totale).toFixed(2) }}
        <br/>
        <br/>
        <input type="button" value="Show Income" ng-click="showIncome()" />
        <input type="button" value="Show Expense" ng-click="showExpense()" />
        <br/>
        <br/>
        <div ng-show="incomeTable" class="tbl">
            <span> Income Table</span>
            <table style="border:1px solid black">
                <tr>
                    <th>Id</th>
                    <th>payer</th>
                    <th>payee</th>
                    <th>category</th>
                    <th>subCategory</th>
                    <th>amount</th>
                    <th>date</th>
                    <th>modeOfPayment</th>
                    <th>noteType</th>
                    <td></td>
                    <td></td>
                </tr>
                <tr ng-repeat="inc in incomes">
                    <td>{{inc.transactionId}}</td>
                    <td>{{inc.payer}}</td>
                    <td>{{inc.payee}}</td>
                    <td>{{inc.category}}</td>
                    <td>{{inc.subCategory}}</td>
                    <td>{{inc.amount}}</td>
                    <td>{{inc.date}}</td>
                    <td>{{inc.modeOfPayment}}</td>
                    <td>{{inc.noteType}}</td>
                    <td>
                        <input type="button" ng-click="edit(inc,'incomes')" value="Edit">
                    </td>
                    <td>
                        <input type="button" ng-click="delete(inc,'incomes')" value="Delete">
                    </td>
                </tr>
                <tfoot>
                    <tr>
                        <th>Total Income</th>
                        <th>{{ totali = (incomes|total:'amount') }}</th>
                    </tr>
                </tfoot>
            </table>
        </div>
        <div ng-show="expenseTable" class="tbl">
            <span> Expense Table</span>
            <table style="border:1px solid black">
                <tr>
                    <th>Id</th>
                    <th>payer</th>
                    <th>payee</th>
                    <th>category</th>
                    <th>subCategory</th>
                    <th>amount</th>
                    <th>date</th>
                    <th>modeOfPayment</th>
                    <th>noteType</th>
                    <td></td>
                    <td></td>
                </tr>
                <tr ng-repeat="exp in expense">
                    <td>{{exp.transactionId}}</td>
                    <td>{{exp.payer}}</td>
                    <td>{{exp.payee}}</td>
                    <td>{{exp.category}}</td>
                    <td>{{exp.subCategory}}</td>
                    <td>{{exp.amount}}</td>
                    <td>{{exp.date}}</td>
                    <td>{{exp.modeOfPayment}}</td>
                    <td>{{exp.noteType}}</td>
                    <td>
                        <input type="button" ng-click="edit(exp,'expense')" value="Edit">
                    </td>
                    <td>
                        <input type="button" ng-click="delete(exp,'expense')" value="Delete">
                    </td>
                </tr>
                <tfoot>
                    <tr>
                        <th>Total Expense</th>
                        <th>{{ totale = (expense|total:'amount')}}</th>
                    </tr>
                </tfoot>
            </table>
        </div>
        <form name="userForm" ng-submit="submitForm()" novalidate>
            ID:
            <input style="margin-top: 10px" type="number" ng-model="user.transactionId" />
            <br /> Payer:
            <input style="margin-top: 10px" type="text" ng-model="user.payer" />
            <br /> Payee:
            <input style="margin-top: 10px" type="text" ng-model="user.payee" />
            <br /> Category:
            <select style="margin-top: 10px" ng-model="user.category">
                <option value="category1">Category1</option>
                <option value="category2">Category2</option>
            </select>
            <br> SubCategory:
            <select style="margin-top: 10px" ng-model="user.subCategory">
                <option value="subcategory1">Sub category1</option>
                <option value="subcategory2">Sub category2</option>
            </select>
            <br> Amount:
            <input style="margin-top: 10px" type="number" name="amount" ng-model="user.amount" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" step="0.01" />
            <br />
            <span ng-show="!userForm.amount.$valid" class="error-block">Invalid amount! <br /></span> Date:
            <input style="margin-top: 10px" type="datetime-local" ng-model="user.date" placeholder="yyyy-MM-ddTHH:mm:ss" min="2001-01-01T00:00:00" max="2016-12-31T00:00:00" required />
            <br /> Mode Of Payment:
            <select style="margin-top: 10px" ng-model="user.modeOfPayment">
                <option value="cash">Cash</option>
                <option value="electronic_transfer">Electronic Transfer</option>
                <option value="cheque">cheque</option>
                <option value="credit_card">Credit card</option>
            </select>
            <br> Note Type:
            <input name="noteType" style="margin-top: 10px" type="text" ng-model="user.noteType" ng-maxlength="20" />
            <br />
            <p ng-show="userForm.noteType.$error.maxlength" class="error-block">Note type exceed 20 char limit</p>
            <input style="margin-top: 10px" type="button" ng-click="reset()" value="Reset" />
            <input style="margin-top: 10px" type="submit" ng-click="updateIncome(user)" value="Save to Income" />
            <input style="margin-top: 10px" type="submit" ng-click="updateExpense(user)" value="Save to Expense" />
        </form>
    </div>
</body>

</html>
